// import '../home_screen_main/home_main_screen.dart';

// import 'dart:collection';
import 'dart:convert';
import 'dart:developer';

import 'package:flutter/material.dart';
import 'package:flutter_map/flutter_map.dart';
import 'package:flutter_map_geojson/flutter_map_geojson.dart';
// import 'package:flutter_map_geojson/flutter_map_geojson.dart';
import 'package:flutter_speed_dial/flutter_speed_dial.dart';
import 'package:geolocator/geolocator.dart';
import 'package:latlong2/latlong.dart';
// import 'package:google_maps_flutter/google_maps_flutter.dart';
import 'package:vedanta_lrms/core/app_export.dart';
// import 'package:vedanta_lrms/data/apiClient/api_client.dart';
import 'package:vedanta_lrms/presentation/home_screen_main/controller/home_four_controller.dart';
import 'package:vedanta_lrms/presentation/home_screen_main/models/home_four_model.dart';
// import 'package:vedanta_lrms/presentation/map_page/models/load_map_data_model.dart';
import 'package:vedanta_lrms/widgets/app_bar/appbar_subtitle.dart';
import 'package:vedanta_lrms/widgets/app_bar/custom_app_bar.dart';
import 'package:http/http.dart' as http;
// import 'package:flutter_map_geojson/flutter_map_geojson.dart';
// import 'package:latlong2/latlong.dart';
// import 'dart:convert';
// import 'package:flutter_map_geojson/flutter_map_geojson.dart';
// import 'package:location/location.dart';
// import 'package:vedanta_lrms/core/app_export.dart';
// import 'package:vedanta_lrms/widgets/app_bar/appbar_subtitle.dart';
// import 'package:vedanta_lrms/widgets/app_bar/custom_app_bar.dart';

class MapScreen extends StatefulWidget {
  final id;
  const MapScreen({super.key, required this.id});

  @override
  State<MapScreen> createState() => _MapScreenState();
}

class _MapScreenState extends State<MapScreen> {
  List<List<LatLng>> polygons = [];
  List<List<LatLng>> coordinates = [];
  bool _mapLoaded = false;
  var label = {};
  GeoJsonParser myGeoJson = GeoJsonParser();
  int? modifiedData;
  HomeFourController controller =
      Get.put(HomeFourController(HomeFourModel().obs));
  // late CameraPosition cameraPosition;
  // late GoogleMapController mapController;
  late LatLng _center = LatLng(22.586123, 88.486406);
  // var mapTypeValue = MapType.terrain;
  // Set<Marker> _markers = Set();
  // Set<Polygon> _polygons = Set();
  // void _onMapCreated(GoogleMapController controller) {
  //   mapController = controller;
  // }

  final MapController _mapController = MapController();
  // Set<Polygon> _polygon = HashSet<Polygon>();
  String? stringGeoJSon = '''
         {   "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.06809361977360595119534991681575775146484375,
                                    23.65887084667173212437774054706096649169921875
                                ],
                                [
                                    87.06785948081045489743701182305812835693359375,
                                    23.6582217297092256558244116604328155517578125
                                ],
                                [
                                    87.06771861671904844115488231182098388671875,
                                    23.65784291951712248192052356898784637451171875
                                ],
                                [
                                    87.06759869188437050979700870811939239501953125,
                                    23.65753073423314845058484934270381927490234375
                                ],
                                [
                                    87.0674102385727337605203501880168914794921875,
                                    23.657031999206310501904226839542388916015625
                                ],
                                [
                                    87.0676900631868875279906205832958221435546875,
                                    23.657052938463266400503925979137420654296875
                                ],
                                [
                                    87.06782521657208917531534098088741302490234375,
                                    23.65742603794893739177496172487735748291015625
                                ],
                                [
                                    87.06795275568202896465663798153400421142578125,
                                    23.65779723386577870769542641937732696533203125
                                ],
                                [
                                    87.06807125284007042864686809480190277099609375,
                                    23.65809752184480885262019000947475433349609375
                                ],
                                [
                                    87.06820259908755588185158558189868927001953125,
                                    23.6584630070552748293266631662845611572265625
                                ],
                                [
                                    87.06835821583723600269877351820468902587890625,
                                    23.65889131003626744131906889379024505615234375
                                ],
                                [
                                    87.0684238889610924161388538777828216552734375,
                                    23.659074052641472007962875068187713623046875
                                ],
                                [
                                    87.06862519136217315462999977171421051025390625,
                                    23.65964797863620105999871157109737396240234375
                                ],
                                [
                                    87.0688207830568217104882933199405670166015625,
                                    23.66019192342213273150264285504817962646484375
                                ],
                                [
                                    87.06903493454746012503164820373058319091796875,
                                    23.660814390421137431985698640346527099609375
                                ],
                                [
                                    87.069117739790499399532563984394073486328125,
                                    23.66105995079709600759088061749935150146484375
                                ],
                                [
                                    87.06889121510261020375764928758144378662109375,
                                    23.6611322864115436459542252123355865478515625
                                ],
                                [
                                    87.06865136543325434104190208017826080322265625,
                                    23.6604393873667504522018134593963623046875
                                ],
                                [
                                    87.06851811561688236906775273382663726806640625,
                                    23.66006057717464727829792536795139312744140625
                                ],
                                [
                                    87.0683848658005672405124641954898834228515625,
                                    23.6596760562759982349234633147716522216796875
                                ],
                                [
                                    87.06827065167243517862516455352306365966796875,
                                    23.6593543531480463570915162563323974609375
                                ],
                                [
                                    87.06809361977360595119534991681575775146484375,
                                    23.65887084667173212437774054706096649169921875
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49862,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "3825",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.06865136543325434104190208017826080322265625,
                                    23.6604393873667504522018134593963623046875
                                ],
                                [
                                    87.06870821317698982966248877346515655517578125,
                                    23.6606036141820368357002735137939453125
                                ],
                                [
                                    87.0686374455864324772846885025501251220703125,
                                    23.6605587768227678679977543652057647705078125
                                ],
                                [
                                    87.06858985636625902770902030169963836669921875,
                                    23.66058542678587173213600181043148040771484375
                                ],
                                [
                                    87.06856320640309832015191204845905303955078125,
                                    23.66057400537312105370801873505115509033203125
                                ],
                                [
                                    87.06850800290766301259282045066356658935546875,
                                    23.6606101731803164511802606284618377685546875
                                ],
                                [
                                    87.068431860155442336690612137317657470703125,
                                    23.66069012307025332120247185230255126953125
                                ],
                                [
                                    87.0683557174032785042072646319866180419921875,
                                    23.66073200158388090130756609141826629638671875
                                ],
                                [
                                    87.06831764602719658796559087932109832763671875,
                                    23.6607662658224171536858193576335906982421875
                                ],
                                [
                                    87.06822770240108866346417926251888275146484375,
                                    23.6608045751445388305000960826873779296875
                                ],
                                [
                                    87.068105160159348088200204074382781982421875,
                                    23.66088904601025433294125832617282867431640625
                                ],
                                [
                                    87.0680706579747720752493478357791900634765625,
                                    23.66091522008133551935316063463687896728515625
                                ],
                                [
                                    87.0679683411516407431918196380138397216796875,
                                    23.6609187892728414226439781486988067626953125
                                ],
                                [
                                    87.06789457786038610720424912869930267333984375,
                                    23.6609033227763347895233891904354095458984375
                                ],
                                [
                                    87.06786245513666244733030907809734344482421875,
                                    23.6608926152017602362320758402347564697265625
                                ],
                                [
                                    87.06767685717835547620779834687709808349609375,
                                    23.660899753584772042813710868358612060546875
                                ],
                                [
                                    87.06765306256835401654825545847415924072265625,
                                    23.66092354819483034589211456477642059326171875
                                ],
                                [
                                    87.06756978143312153406441211700439453125,
                                    23.66092354819483034589211456477642059326171875
                                ],
                                [
                                    87.067499587333486488205380737781524658203125,
                                    23.66088547681869158623158000409603118896484375
                                ],
                                [
                                    87.06748650029788905158056877553462982177734375,
                                    23.6608759589747705831541679799556732177734375
                                ],
                                [
                                    87.0674710338013255750411190092563629150390625,
                                    23.660873579513690856401808559894561767578125
                                ],
                                [
                                    87.06743296242524365879944525659084320068359375,
                                    23.6609045125069314963184297084808349609375
                                ],
                                [
                                    87.06735206075109090306796133518218994140625,
                                    23.66089142547133405969361774623394012451171875
                                ],
                                [
                                    87.067262830963272790540941059589385986328125,
                                    23.660809334066698284004814922809600830078125
                                ],
                                [
                                    87.06706771516081744266557507216930389404296875,
                                    23.66067846371123550852644257247447967529296875
                                ],
                                [
                                    87.0670213156712406998849473893642425537109375,
                                    23.6606273052997266859165392816066741943359375
                                ],
                                [
                                    87.06700584917467722334549762308597564697265625,
                                    23.66056781877449566309223882853984832763671875
                                ],
                                [
                                    87.067012987557745873345993459224700927734375,
                                    23.6604952452138377338997088372707366943359375
                                ],
                                [
                                    87.06706057677774879266507923603057861328125,
                                    23.6604417073411923411185853183269500732421875
                                ],
                                [
                                    87.0671343400690602720715105533599853515625,
                                    23.660407205156616328167729079723358154296875
                                ],
                                [
                                    87.0671593244095447516883723437786102294921875,
                                    23.6603917386601096950471401214599609375
                                ],
                                [
                                    87.067071284352323345956392586231231689453125,
                                    23.66023945315572518666158430278301239013671875
                                ],
                                [
                                    87.06696182914600967706064693629741668701171875,
                                    23.66001340436019972912617959082126617431640625
                                ],
                                [
                                    87.06697658180428334162570536136627197265625,
                                    23.6599560593498381422250531613826751708984375
                                ],
                                [
                                    87.06696801574463506767642684280872344970703125,
                                    23.65985041128124066744931042194366455078125
                                ],
                                [
                                    87.0669223300934618237079121172428131103515625,
                                    23.6597190650337552142445929348468780517578125
                                ],
                                [
                                    87.06691852295574562958790920674800872802734375,
                                    23.65966290975387664730078540742397308349609375
                                ],
                                [
                                    87.0669099568962110424763523042201995849609375,
                                    23.65958105629528063218458555638790130615234375
                                ],
                                [
                                    87.066936606859371750033460557460784912109375,
                                    23.659508720680832993821240961551666259765625
                                ],
                                [
                                    87.066933751506212502135895192623138427734375,
                                    23.65940973510305411764420568943023681640625
                                ],
                                [
                                    87.066903294405392443877644836902618408203125,
                                    23.6592869549150464081321842968463897705078125
                                ],
                                [
                                    87.0669099568962110424763523042201995849609375,
                                    23.65926982279569301681476645171642303466796875
                                ],
                                [
                                    87.06697182288235126179642975330352783203125,
                                    23.6592174746537011742475442588329315185546875
                                ],
                                [
                                    87.0670869887950402699061669409275054931640625,
                                    23.659154656883174538961611688137054443359375
                                ],
                                [
                                    87.06714790299673722984152846038341522216796875,
                                    23.65913466941066189974662847816944122314453125
                                ],
                                [
                                    87.06722975645533324495772831141948699951171875,
                                    23.6591089712318307647365145385265350341796875
                                ],
                                [
                                    87.06724974392778904075385071337223052978515625,
                                    23.65914418725463974624290131032466888427734375
                                ],
                                [
                                    87.067287815303870956995524466037750244140625,
                                    23.65918416219955133783514611423015594482421875
                                ],
                                [
                                    87.06730114028556499761180020868778228759765625,
                                    23.6592079568096096409135498106479644775390625
                                ],
                                [
                                    87.0673201759735775340232066810131072998046875,
                                    23.65931741201592330980929546058177947998046875
                                ],
                                [
                                    87.0673458741524655124521814286708831787109375,
                                    23.65938974763054147842922247946262359619140625
                                ],
                                [
                                    87.06737062054691023149644024670124053955078125,
                                    23.659456372538670620997436344623565673828125
                                ],
                                [
                                    87.0673373080927603950840421020984649658203125,
                                    23.659496347483582212589681148529052734375
                                ],
                                [
                                    87.06731446526720219480921514332294464111328125,
                                    23.65951633495609485180466435849666595458984375
                                ],
                                [
                                    87.0673239831111231978866271674633026123046875,
                                    23.65962007945580580781097523868083953857421875
                                ],
                                [
                                    87.0673325491708283152547664940357208251953125,
                                    23.65966576510714958203607238829135894775390625
                                ],
                                [
                                    87.06735158485884085166617296636104583740234375,
                                    23.65968575257966222125105559825897216796875
                                ],
                                [
                                    87.06748959359714490346959792077541351318359375,
                                    23.65963054908417007027310319244861602783203125
                                ],
                                [
                                    87.067749430739013405400328338146209716796875,
                                    23.659517286740310737513937056064605712890625
                                ],
                                [
                                    87.06766567371158771493355743587017059326171875,
                                    23.6593773744333475406165234744548797607421875
                                ],
                                [
                                    87.067602855941004236228764057159423828125,
                                    23.65928409956177347339689731597900390625
                                ],
                                [
                                    87.06757620597772984183393418788909912109375,
                                    23.6592517388920668963692151010036468505859375
                                ],
                                [
                                    87.0675798941423408905393444001674652099609375,
                                    23.6591926092861513097886927425861358642578125
                                ],
                                [
                                    87.06756347586139099803403951227664947509765625,
                                    23.65913550222200001371675170958042144775390625
                                ],
                                [
                                    87.067517076371814255253411829471588134765625,
                                    23.65903770637470415749703533947467803955078125
                                ],
                                [
                                    87.06753991919737245552823878824710845947265625,
                                    23.6589834546638257961603812873363494873046875
                                ],
                                [
                                    87.06746996304383401366067118942737579345703125,
                                    23.65892135073153212942997924983501434326171875
                                ],
                                [
                                    87.0674478340564519385225139558315277099609375,
                                    23.658924919923038032720796763896942138671875
                                ],
                                [
                                    87.06742927426063261009403504431247711181640625,
                                    23.65885710528431218335754238069057464599609375
                                ],
                                [
                                    87.06748352597145412801182828843593597412109375,
                                    23.65880927811809897320927120745182037353515625
                                ],
                                [
                                    87.0675042272823702660389244556427001953125,
                                    23.658797142866887952550314366817474365234375
                                ],
                                [
                                    87.067543250442895441665314137935638427734375,
                                    23.65873729942273939741426147520542144775390625
                                ],
                                [
                                    87.06761106508139391735312528908252716064453125,
                                    23.6586070239326318187522701919078826904296875
                                ],
                                [
                                    87.06766162862783176024095155298709869384765625,
                                    23.65854694254227297278703190386295318603515625
                                ],
                                [
                                    87.06778655033070890567614696919918060302734375,
                                    23.658454143562948956969194114208221435546875
                                ],
                                [
                                    87.0678275960329983718111179769039154052734375,
                                    23.65847793817312094688531942665576934814453125
                                ],
                                [
                                    87.067905523381114107905887067317962646484375,
                                    23.65856954742184825590811669826507568359375
                                ],
                                [
                                    87.0679614407146118537639267742633819580078125,
                                    23.6586224904291384518728591501712799072265625
                                ],
                                [
                                    87.06800784020424543996341526508331298828125,
                                    23.65865877720949583817855454981327056884765625
                                ],
                                [
                                    87.06801796464577591905253939330577850341796875,
                                    23.65866110359337426416459493339061737060546875
                                ],
                                [
                                    87.06809361977360595119534991681575775146484375,
                                    23.65887084667173212437774054706096649169921875
                                ],
                                [
                                    87.06827065167243517862516455352306365966796875,
                                    23.6593543531480463570915162563323974609375
                                ],
                                [
                                    87.0683848658005672405124641954898834228515625,
                                    23.6596760562759982349234633147716522216796875
                                ],
                                [
                                    87.06839648386886665321071632206439971923828125,
                                    23.65970958270150958924205042421817779541015625
                                ],
                                [
                                    87.0683978978844379525980912148952484130859375,
                                    23.6597136631461353317718021571636199951171875
                                ],
                                [
                                    87.06851811561688236906775273382663726806640625,
                                    23.66006057717464727829792536795139312744140625
                                ],
                                [
                                    87.06865136543325434104190208017826080322265625,
                                    23.6604393873667504522018134593963623046875
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49863,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "3451",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.0760382633246763361967168748378753662109375,
                                    23.680676326474667803267948329448699951171875
                                ],
                                [
                                    87.07609108735886138674686662852764129638671875,
                                    23.680679181827827051165513694286346435546875
                                ],
                                [
                                    87.07613677301020516097196377813816070556640625,
                                    23.6806649050619171248399652540683746337890625
                                ],
                                [
                                    87.07616532654236607413622550666332244873046875,
                                    23.68067489879803133590030483901500701904296875
                                ],
                                [
                                    87.0761767479551735959830693900585174560546875,
                                    23.6806863202108388577471487224102020263671875
                                ],
                                [
                                    87.0761895970446175851975567638874053955078125,
                                    23.68090903776101185940206050872802734375
                                ],
                                [
                                    87.07617532027853712861542589962482452392578125,
                                    23.6809547234123556336271576583385467529296875
                                ],
                                [
                                    87.07616104351245667203329503536224365234375,
                                    23.68098613229761895127012394368648529052734375
                                ],
                                [
                                    87.07616104351245667203329503536224365234375,
                                    23.6810189688595755796995945274829864501953125
                                ],
                                [
                                    87.07618674169134465046226978302001953125,
                                    23.68103752865539490812807343900203704833984375
                                ],
                                [
                                    87.07621243987017578547238372266292572021484375,
                                    23.68104466703840671470970846712589263916015625
                                ],
                                [
                                    87.07621672289997150073759257793426513671875,
                                    23.68106322683428288655704818665981292724609375
                                ],
                                [
                                    87.07620958451707338099367916584014892578125,
                                    23.6810917803662732694647274911403656005859375
                                ],
                                [
                                    87.07618674169134465046226978302001953125,
                                    23.68112604460480952184298075735569000244140625
                                ],
                                [
                                    87.07613677301020516097196377813816070556640625,
                                    23.6811488874303677221178077161312103271484375
                                ],
                                [
                                    87.07601113746915189040009863674640655517578125,
                                    23.68107750360019281288259662687778472900390625
                                ],
                                [
                                    87.07604540170768814277835190296173095703125,
                                    23.681033245625485506025142967700958251953125
                                ],
                                [
                                    87.07606110615023453647154383361339569091796875,
                                    23.68099041532741466653533279895782470703125
                                ],
                                [
                                    87.0760710998865761212073266506195068359375,
                                    23.6809447296760708923102356493473052978515625
                                ],
                                [
                                    87.07605396776722272988990880548954010009765625,
                                    23.68076912545387813224806450307369232177734375
                                ],
                                [
                                    87.07604968473742701462469995021820068359375,
                                    23.6807034523300217188079841434955596923828125
                                ],
                                [
                                    87.0760382633246763361967168748378753662109375,
                                    23.680676326474667803267948329448699951171875
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49864,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "1213",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.07796638816699896779027767479419708251953125,
                                    23.6794327249745037988759577274322509765625
                                ],
                                [
                                    87.0780049354351604051771573722362518310546875,
                                    23.6794384356809359815088100731372833251953125
                                ],
                                [
                                    87.07808916835483614704571664333343505859375,
                                    23.6794955427450304341618902981281280517578125
                                ],
                                [
                                    87.078176256627557449974119663238525390625,
                                    23.67956978192836459129466675221920013427734375
                                ],
                                [
                                    87.078184822687262567342258989810943603515625,
                                    23.67967114696722319422406144440174102783203125
                                ],
                                [
                                    87.07814199238919172785244882106781005859375,
                                    23.67971397726529403371387161314487457275390625
                                ],
                                [
                                    87.078069180882494038087315857410430908203125,
                                    23.6797625182699675860931165516376495361328125
                                ],
                                [
                                    87.0779706711967946830554865300655364990234375,
                                    23.6797625182699675860931165516376495361328125
                                ],
                                [
                                    87.07793355160509918277966789901256561279296875,
                                    23.679795354831867371103726327419281005859375
                                ],
                                [
                                    87.0778521740385258453898131847381591796875,
                                    23.679833902099971965071745216846466064453125
                                ],
                                [
                                    87.07775080899972408587927930057048797607421875,
                                    23.67973396473780667292885482311248779296875
                                ],
                                [
                                    87.07771368940802858560346066951751708984375,
                                    23.67968399605666718343854881823062896728515625
                                ],
                                [
                                    87.0777048854023405510815791785717010498046875,
                                    23.679648304141664993949234485626220703125
                                ],
                                [
                                    87.07771797243793798770639114081859588623046875,
                                    23.6796197506095040807849727571010589599609375
                                ],
                                [
                                    87.0777477157004113905713893473148345947265625,
                                    23.6795959559995026211254298686981201171875
                                ],
                                [
                                    87.07782147899166602655895985662937164306640625,
                                    23.67955669489293768492643721401691436767578125
                                ],
                                [
                                    87.0779047601268985090428031980991363525390625,
                                    23.6795031570201217618887312710285186767578125
                                ],
                                [
                                    87.077934503389542442164383828639984130859375,
                                    23.67947817267969412569073028862476348876953125
                                ],
                                [
                                    87.07796638816699896779027767479419708251953125,
                                    23.6794327249745037988759577274322509765625
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49865,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "1272",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.08707661465774663156480528414249420166015625,
                                    23.680953835080117642064578831195831298828125
                                ],
                                [
                                    87.087118493171374211669899523258209228515625,
                                    23.68110612058450215045013464987277984619140625
                                ],
                                [
                                    87.086981436217456575832329690456390380859375,
                                    23.68117464906163149862550199031829833984375
                                ],
                                [
                                    87.08694907554780684222350828349590301513671875,
                                    23.6811327705478333882638253271579742431640625
                                ],
                                [
                                    87.08694717197892032345407642424106597900390625,
                                    23.68104139924508899639477021992206573486328125
                                ],
                                [
                                    87.08697191837336504249833524227142333984375,
                                    23.68101474928198513225652277469635009765625
                                ],
                                [
                                    87.08704806112558571840054355561733245849609375,
                                    23.68096335292420917539857327938079833984375
                                ],
                                [
                                    87.08707661465774663156480528414249420166015625,
                                    23.680953835080117642064578831195831298828125
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49866,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2153",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.0869036278426165154087357223033905029296875,
                                    23.68038312135780643075122497975826263427734375
                                ],
                                [
                                    87.08707066600510415810276754200458526611328125,
                                    23.68018253279495866081560961902141571044921875
                                ],
                                [
                                    87.08707994590304224402643740177154541015625,
                                    23.68018110511849272370454855263233184814453125
                                ],
                                [
                                    87.08713134226081820088438689708709716796875,
                                    23.6802125140037560413475148379802703857421875
                                ],
                                [
                                    87.087169175690860356553457677364349365234375,
                                    23.68026176884649203202570788562297821044921875
                                ],
                                [
                                    87.0869850054090193225420080125331878662109375,
                                    23.6804366592303949801134876906871795654296875
                                ],
                                [
                                    87.0869036278426165154087357223033905029296875,
                                    23.68038312135780643075122497975826263427734375
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49867,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2189",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.09168431002575516686192713677883148193359375,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.09177187419072652119211852550506591796875,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.0918042348604330982198007404804229736328125,
                                    23.67742767612327270398964174091815948486328125
                                ],
                                [
                                    87.09181946341089997076778672635555267333984375,
                                    23.677551408095723672886379063129425048828125
                                ],
                                [
                                    87.09182517411733215340063907206058502197265625,
                                    23.6776275508478875053697265684604644775390625
                                ],
                                [
                                    87.0918442098053446898120455443859100341796875,
                                    23.6777550899578272947110235691070556640625
                                ],
                                [
                                    87.09185943835569787552230991423130035400390625,
                                    23.67784455769168516781064681708812713623046875
                                ],
                                [
                                    87.09182517411733215340063907206058502197265625,
                                    23.677854075535606170888058841228485107421875
                                ],
                                [
                                    87.09174712779628180214785970747470855712890625,
                                    23.6778179077283539299969561398029327392578125
                                ],
                                [
                                    87.09171095998902956125675700604915618896484375,
                                    23.6778045827467167327995412051677703857421875
                                ],
                                [
                                    87.09167859931932298422907479107379913330078125,
                                    23.67772082571929104233277030289173126220703125
                                ],
                                [
                                    87.091690020732130506075918674468994140625,
                                    23.6776922721873006594250909984111785888671875
                                ],
                                [
                                    87.091690020732130506075918674468994140625,
                                    23.6776313579854331692331470549106597900390625
                                ],
                                [
                                    87.091516795970846942509524524211883544921875,
                                    23.677595190178180928342044353485107421875
                                ],
                                [
                                    87.0915301209524841397069394588470458984375,
                                    23.677503818875493379891850054264068603515625
                                ],
                                [
                                    87.09155106020938319488777779042720794677734375,
                                    23.677452422517717423033900558948516845703125
                                ],
                                [
                                    87.0915796137413735777954570949077606201171875,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.09168431002575516686192713677883148193359375,
                                    23.6773896047471907877479679882526397705078125
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49868,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2285",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.0915796137413735777954570949077606201171875,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.091542970041928128921426832675933837890625,
                                    23.677343919095847013522870838642120361328125
                                ],
                                [
                                    87.0915858003399989684112370014190673828125,
                                    23.6773201244858455538633279502391815185546875
                                ],
                                [
                                    87.09160245656715915174572728574275970458984375,
                                    23.67719639251345142838545143604278564453125
                                ],
                                [
                                    87.09158223114849306512041948735713958740234375,
                                    23.67717854655603559876908548176288604736328125
                                ],
                                [
                                    87.0915774722265041418722830712795257568359375,
                                    23.6771357162577942290226928889751434326171875
                                ],
                                [
                                    87.09160126683667613178840838372707366943359375,
                                    23.677132147066231482313014566898345947265625
                                ],
                                [
                                    87.0916250614467344348668120801448822021484375,
                                    23.677067901619238909916020929813385009765625
                                ],
                                [
                                    87.09163219982974624144844710826873779296875,
                                    23.67695606695184551426791585981845855712890625
                                ],
                                [
                                    87.091665512283725547604262828826904296875,
                                    23.67692989288076432785601355135440826416015625
                                ],
                                [
                                    87.09166908147523145089508034288883209228515625,
                                    23.6769013393487739449483342468738555908203125
                                ],
                                [
                                    87.0916881171632439873064868152141571044921875,
                                    23.67686802689462410853593610227108001708984375
                                ],
                                [
                                    87.09172142961739382371888495981693267822265625,
                                    23.6767954533339661793434061110019683837890625
                                ],
                                [
                                    87.0917226193478200002573430538177490234375,
                                    23.6767550024969750666059553623199462890625
                                ],
                                [
                                    87.09177139829847646979033015668392181396484375,
                                    23.6767109824683075203211046755313873291015625
                                ],
                                [
                                    87.0917618804545554667129181325435638427734375,
                                    23.67667648028373150737024843692779541015625
                                ],
                                [
                                    87.0917725880291300200042314827442169189453125,
                                    23.67666101378716803083079867064952850341796875
                                ],
                                [
                                    87.09182374644069568603299558162689208984375,
                                    23.6766265116024214876233600080013275146484375
                                ],
                                [
                                    87.09188799188785878868657164275646209716796875,
                                    23.6766526856735026740352623164653778076171875
                                ],
                                [
                                    87.09200696493809346065972931683063507080078125,
                                    23.67661937321958021129830740392208099365234375
                                ],
                                [
                                    87.09212474825790195609442889690399169921875,
                                    23.676612234836511561297811567783355712890625
                                ],
                                [
                                    87.0922175472372828153311274945735931396484375,
                                    23.6765884402265101016382686793804168701171875
                                ],
                                [
                                    87.09225204942185882828198373317718505859375,
                                    23.676639598638075767667032778263092041015625
                                ],
                                [
                                    87.0922496699607791015296243131160736083984375,
                                    23.67667172136174258412211202085018157958984375
                                ],
                                [
                                    87.09227465430143411140306852757930755615234375,
                                    23.67670979273765397010720334947109222412109375
                                ],
                                [
                                    87.09231153594686247743084095418453216552734375,
                                    23.67670622354631859707296825945377349853515625
                                ],
                                [
                                    87.0923722122025765202124603092670440673828125,
                                    23.67695368749076578751555643975734710693359375
                                ],
                                [
                                    87.09241147330925514324917457997798919677734375,
                                    23.67705719404466435662470757961273193359375
                                ],
                                [
                                    87.09226156726577983135939575731754302978515625,
                                    23.677100024342735196114517748355865478515625
                                ],
                                [
                                    87.0921866142440421754145063459873199462890625,
                                    23.6771178703003215559874661266803741455078125
                                ],
                                [
                                    87.09187609458285805885680019855499267578125,
                                    23.677199961705127861932851374149322509765625
                                ],
                                [
                                    87.09177496749003921650000847876071929931640625,
                                    23.6772606379607850612956099212169647216796875
                                ],
                                [
                                    87.091760690723958759917877614498138427734375,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.09168431002575516686192713677883148193359375,
                                    23.6773896047471907877479679882526397705078125
                                ],
                                [
                                    87.0915796137413735777954570949077606201171875,
                                    23.6773896047471907877479679882526397705078125
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49869,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2286",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.08997996159354215706116519868373870849609375,
                                    23.6772362484853147179819643497467041015625
                                ],
                                [
                                    87.0899823410544513535569421947002410888671875,
                                    23.67727550959199334101867862045764923095703125
                                ],
                                [
                                    87.08996449509703552394057624042034149169921875,
                                    23.67728383770548816755763255059719085693359375
                                ],
                                [
                                    87.08984076312464139846269972622394561767578125,
                                    23.67721245387525641490356065332889556884765625
                                ],
                                [
                                    87.0898026917485594822210259735584259033203125,
                                    23.67719698737874978178297169506549835205078125
                                ],
                                [
                                    87.08982172743657201863243244588375091552734375,
                                    23.67717319276874832212342880666255950927734375
                                ],
                                [
                                    87.08989311126680377128650434315204620361328125,
                                    23.67714582896718411575420759618282318115234375
                                ],
                                [
                                    87.089974012940956527017988264560699462890625,
                                    23.67711846516550622254726476967334747314453125
                                ],
                                [
                                    87.090079898955764292622916400432586669921875,
                                    23.67706492729286082976614125072956085205078125
                                ],
                                [
                                    87.09015247251642222181544639170169830322265625,
                                    23.677160105733264572336338460445404052734375
                                ],
                                [
                                    87.08997996159354215706116519868373870849609375,
                                    23.6772362484853147179819643497467041015625
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49870,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2298",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.09488087794153443610412068665027618408203125,
                                    23.67577130357358328183181583881378173828125
                                ],
                                [
                                    87.09484661370294134030700661242008209228515625,
                                    23.67571800364697764962329529225826263427734375
                                ],
                                [
                                    87.0948180601709509573993273079395294189453125,
                                    23.67567041442697473030420951545238494873046875
                                ],
                                [
                                    87.094772374519607183174230158329010009765625,
                                    23.67562282520674443730968050658702850341796875
                                ],
                                [
                                    87.09481234946457561818533577024936676025390625,
                                    23.67561140379393691546283662319183349609375
                                ],
                                [
                                    87.09492466002399169155978597700595855712890625,
                                    23.67557904312428718185401521623134613037109375
                                ],
                                [
                                    87.09497986351931331228115595877170562744140625,
                                    23.6755771395555711933411657810211181640625
                                ],
                                [
                                    87.09504839199638581703766249120235443115234375,
                                    23.675598078812299718265421688556671142578125
                                ],
                                [
                                    87.0950598134091933388845063745975494384765625,
                                    23.6756894501149872667156159877777099609375
                                ],
                                [
                                    87.09488087794153443610412068665027618408203125,
                                    23.67577130357358328183181583881378173828125
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49871,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2378",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.07558920351078768362640403211116790771484375,
                                    23.67791248535462500512949191033840179443359375
                                ],
                                [
                                    87.0756705810771336473408155143260955810546875,
                                    23.67786965505655416563968174159526824951171875
                                ],
                                [
                                    87.07586760044847551398561336100101470947265625,
                                    23.67779827122632241298560984432697296142578125
                                ],
                                [
                                    87.07591899680619462742470204830169677734375,
                                    23.67791819606105718776234425604343414306640625
                                ],
                                [
                                    87.076036066287770154303871095180511474609375,
                                    23.677873938086349880904890596866607666015625
                                ],
                                [
                                    87.076056053760112263262271881103515625,
                                    23.67798101383158382304827682673931121826171875
                                ],
                                [
                                    87.07598038690008479534299112856388092041015625,
                                    23.67800385665731255357968620955944061279296875
                                ],
                                [
                                    87.07564916592804138417704962193965911865234375,
                                    23.6780795235173400214989669620990753173828125
                                ],
                                [
                                    87.07558920351078768362640403211116790771484375,
                                    23.67791248535462500512949191033840179443359375
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49872,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "1157",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    87.09096270278388374208589084446430206298828125,
                                    23.67616910384737138883792795240879058837890625
                                ],
                                [
                                    87.09084848865558114994200877845287322998046875,
                                    23.676122704357794646057300269603729248046875
                                ],
                                [
                                    87.090805658357339780195616185665130615234375,
                                    23.6761572065423706590081565082073211669921875
                                ],
                                [
                                    87.0908127967403515867772512137889862060546875,
                                    23.67610842759171418947516940534114837646484375
                                ],
                                [
                                    87.09086990380450288284919224679470062255859375,
                                    23.67596922912298396113328635692596435546875
                                ],
                                [
                                    87.0908925086840781659702770411968231201171875,
                                    23.67593353720775439796852879226207733154296875
                                ],
                                [
                                    87.090911544372147545800544321537017822265625,
                                    23.67586691229968209881917573511600494384765625
                                ],
                                [
                                    87.0909127341027442525955848395824432373046875,
                                    23.675820512810105356038548052310943603515625
                                ],
                                [
                                    87.09089964706714681597077287733554840087890625,
                                    23.6757824414338529095402918756008148193359375
                                ],
                                [
                                    87.090910354641664525843225419521331787109375,
                                    23.67569321164620532726985402405261993408203125
                                ],
                                [
                                    87.0909270108686541789211332798004150390625,
                                    23.67563967377355993448873050510883331298828125
                                ],
                                [
                                    87.09092225194666525567299686372280120849609375,
                                    23.67559565374489238820387981832027435302734375
                                ],
                                [
                                    87.09093533898231953571666963398456573486328125,
                                    23.67551356234025661251507699489593505859375
                                ],
                                [
                                    87.0909198724856423723394982516765594482421875,
                                    23.675445747701587606570683419704437255859375
                                ],
                                [
                                    87.0908758524570885128923691809177398681640625,
                                    23.6754052968643691201577894389629364013671875
                                ],
                                [
                                    87.09086395515208778306259773671627044677734375,
                                    23.675313687615698654553852975368499755859375
                                ],
                                [
                                    87.09084610919450142318964935839176177978515625,
                                    23.67524825243805253194295801222324371337890625
                                ],
                                [
                                    87.09082707350643204335938207805156707763671875,
                                    23.6752208886363177953171543776988983154296875
                                ],
                                [
                                    87.09089369841473171618417836725711822509765625,
                                    23.6751994734873960624099709093570709228515625
                                ],
                                [
                                    87.09104717364954240110819227993488311767578125,
                                    23.67516140211131414616829715669155120849609375
                                ],
                                [
                                    87.09109119367820994739304296672344207763671875,
                                    23.67512571019625511326012201607227325439453125
                                ],
                                [
                                    87.091154249394776343251578509807586669921875,
                                    23.675223268097397522069513797760009765625
                                ],
                                [
                                    87.09108167583411841405904851853847503662109375,
                                    23.67525420109046763172955252230167388916015625
                                ],
                                [
                                    87.09111022936627932722331024706363677978515625,
                                    23.67536008710527539733448065817356109619140625
                                ],
                                [
                                    87.09108881421713022064068354666233062744140625,
                                    23.67537674333243558066897094249725341796875
                                ],
                                [
                                    87.09108167583411841405904851853847503662109375,
                                    23.6754005379424370403285138309001922607421875
                                ],
                                [
                                    87.09108405529519814081140793859958648681640625,
                                    23.67547549096417469627340324223041534423828125
                                ],
                                [
                                    87.09104955311062212786055169999599456787109375,
                                    23.675608740780489824828691780567169189453125
                                ],
                                [
                                    87.09102337903954094144864939153194427490234375,
                                    23.6757122473342178636812604963779449462890625
                                ],
                                [
                                    87.091011481734540211618877947330474853515625,
                                    23.67578482089493263629265129566192626953125
                                ],
                                [
                                    87.091011481734540211618877947330474853515625,
                                    23.6758609636470964687759988009929656982421875
                                ],
                                [
                                    87.0910352763445416712784208357334136962890625,
                                    23.67592758855533929818193428218364715576171875
                                ],
                                [
                                    87.09103051742255274803028441965579986572265625,
                                    23.67597041885341013767174445092678070068359375
                                ],
                                [
                                    87.09100077415996565832756459712982177734375,
                                    23.6759835058888938874588347971439361572265625
                                ],
                                [
                                    87.09096865143629884187248535454273223876953125,
                                    23.67613460166279537588707171380519866943359375
                                ],
                                [
                                    87.09096270278388374208589084446430206298828125,
                                    23.67616910384737138883792795240879058837890625
                                ]
                            ]
                        ]
                    },
                    "properties": {
                        "base": 49873,
                        "status": "1",
                        "lat": 0,
                        "lng": 0,
                        "id": "2320",
                        "type": "polygon",
                        "plot_id": 0,
                        "village_id": 89,
                        "village_name": "Benali"
                    }
                }
            ]
        }

''';
  // created list of locations to display polygon
  // List<LatLng> points = [
  //   // LatLng(19.0759837, 72.8776559),
  //   // LatLng(28.679079, 77.069710),
  //   // LatLng(26.850000, 80.949997),
  //   // LatLng(19.0759837, 72.8776559),
  // ];
  // Future<void> _parseGeoJson() async {
  //   final geoJson = GeoJsonParser();
  //   final geoJsonResult = geoJson.parseGeoJsonAsString(stringGeoJSon!);
  //     _addMarkersAndPolygons(geoJson);
  // }

  // void _addMarkersAndPolygons(GeoJsonParser stringGeoJSon) {
  //   for (var feature in stringGeoJSon.features) {
  //     if (feature.geometry is stringGeoJSon) {
  //       final point = feature.geometry as stringGeoJSon;
  //       final coordinates = LatLng(point.geoPoint.latitude, point.geoPoint.longitude);

  //       final marker = Marker(
  //         markerId: MarkerId(coordinates.toString()),
  //         position: coordinates,
  //         infoWindow: InfoWindow(
  //           title: 'Marker Title',
  //           snippet: 'Marker Snippet',
  //         ),
  //       );

  //       _markers.add(marker);
  //     } else if (feature.geometry is GeoJsonPolygon) {
  //       final polygon = feature.geometry as GeoJsonPolygon;

  //       final polygonCoordinates = polygon.geoSerie.toLatLng();
  //       final polygonId = PolygonId(polygonCoordinates.toString());

  //       final poly = Polygon(
  //         polygonId: polygonId,
  //         points: polygonCoordinates,
  //         strokeWidth: 2,
  //         strokeColor: Colors.blue,
  //         fillColor: Colors.blue.withOpacity(0.2),
  //       );

  //       _polygons.add(poly);
  //     }
  //     // Add more cases for other geometry types as needed
  //   }
  // }

  _fetchGeoJsonData(modifiedData) async {
    SharedPreferences prefs = await SharedPreferences.getInstance();
    String? token = prefs.getString('token');
    final response = await http.get(
        Uri.parse('${Constant.baseurl}load-map-data/$modifiedData'),
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json',
          'Authorization': 'Bearer $token',
        });
    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      // data['results']['data']['features'].forEach((data) {
      //   print(data['geometry']['coordinates'][0][0][0]);
      //   points.add(LatLng(data['geometry']['coordinates'][0][0][0],
      //       data['geometry']['coordinates'][0][0][1]));
      // });
      // return points;
      // print(data['results']['data']);
      //  Map<String, dynamic> geoJsonMap = data['results']['data'];
      // print(geoJsonMap);
      label = data['results']['data'];
      polygons = parseGeoJson(data['results']['data']);
      // log('''${data['results']['data'].toString()}''');
      print(polygons);
      if (polygons != []) {
        setState(() {
          _mapLoaded = true;
          getLocation().then((value) =>
              {this._center = LatLng(value.latitude, value.longitude)});
        });
      } else {
        setState(() {
          _mapLoaded = false;
        });
      }
//  return parseGeoJson(data['results']['data']);
    } else {
      throw Exception();
    }
  }

  List<List<LatLng>> parseGeoJson(geoJsonString) {
    // Map<String, dynamic> geoJsonMap = json.decode(geoJsonString);
    // print(geoJsonMap);
    Map<String, dynamic> geoJsonMap = geoJsonString;
    print(geoJsonMap);
    List<List<LatLng>> coordinates = [];

    if (geoJsonMap.containsKey('features')) {
      var features = geoJsonMap['features'] as List<dynamic>;
      for (var feature in features) {
        if (feature.containsKey('geometry')) {
          var geometry = feature['geometry'];
          if (geometry.containsKey('type') && geometry['type'] == 'Polygon') {
            var polygonCoordinates = <LatLng>[];
            var coordinatesList = geometry['coordinates'][0];
            for (var coordinate in coordinatesList) {
              polygonCoordinates.add(LatLng(coordinate[1], coordinate[0]));
            }
            coordinates.add(polygonCoordinates);
          }
        }
      }
    }

    return coordinates;
  }

  @override
  void initState() {
    super.initState();
    _mapLoaded = false;
    modifiedData = widget.id;
    _fetchGeoJsonData(modifiedData);
    // Future.delayed(const Duration(seconds: 3), () {
    //   setState(() {
    //     _mapLoaded = true;
    //     getLocation().then(
    //       (value) => {this._center = LatLng(value.latitude, value.longitude)});
    //   });

    // });

// polygons = parseGeoJson(stringGeoJSon!);
// print(polygons);
    // parse GeoJson data - GeoJson is stored as [String]
    // myGeoJson.parseGeoJsonAsString(stringGeoJSon);

    // print(modifiedData);
  }

  Future<Position> getLocation() async {
    // LocationPermission permission;
    bool permissionStatus = await Geolocator.isLocationServiceEnabled();
    if (!permissionStatus) {
      return Future.error("location service disabled");
    }
    LocationPermission permission = await Geolocator.checkPermission();
    if (permission == LocationPermission.denied) {
      permission = await Geolocator.requestPermission();
      if (permission == LocationPermission.denied) {
        return Future.error("disabled");
      }
    }
    return await Geolocator.getCurrentPosition();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        resizeToAvoidBottomInset: true,
        appBar: CustomAppBar(
          height: 50,
          title:
              AppbarSubtitle(text: "lbl_map".tr, margin: getMargin(left: 20)),
        ),
        body: Stack(children: [
          // GoogleMap(
          //   mapType: mapTypeValue,
          //   onMapCreated: _onMapCreated,
          //   initialCameraPosition: CameraPosition(
          //     target: _center,
          //     zoom: 16.0,
          //   ),
          //   markers: _markers,
          //   myLocationEnabled: true,
          //   zoomControlsEnabled: false,
          //   polygons:  myGeoJson.polygons,

          // ),
          _mapLoaded
              ? FlutterMap(
                  mapController: _mapController,
                  options: MapOptions(
                    // initialCenter: LatLng(45.993807, 14.483972),
                    center: _center != null
                        ? _center
                        : LatLng(22.571085, 88.372896),
                    zoom: 14,
                  ),
                  children: [
                    TileLayer(
                        urlTemplate:
                            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                        subdomains: const ['a', 'b', 'c']),
                    PolygonLayer(
                      polygons: polygons
                          .map(
                            (polygon) => Polygon(
                              label: "abcd",
                              points: polygon,
                              color: Colors.blue.withOpacity(0.5),
                              borderStrokeWidth: 2.0,
                              borderColor: Colors.red,
                            ),
                          )
                          .toList(),
                    ),
                    PolylineLayer(polylines: myGeoJson.polylines),
                    MarkerLayer(markers: myGeoJson.markers)
                  ],
                )
              : Center(child: CircularProgressIndicator()),
          // Positioned(
          //   top: 100,
          //   child: Padding(
          //     padding: getPadding(top: 16, right: 20, left: 20),
          //     child: CustomTextFormField(
          //       shadowTextfield: true,
          //       function: () {
          //         Get.toNamed(AppRoutes.searchOneScreen);
          //       },
          //       textInputType: TextInputType.none,
          //       width: double.infinity,
          //       focusNode: FocusNode(),
          //       hintText: "lbl_search_location".tr,
          //       variant: TextFormFieldVariant.OutlineBlack90016,
          //       shape: TextFormFieldShape.RoundedBorder10,
          //       padding: TextFormFieldPadding.PaddingT14_1,
          //       fontStyle: TextFormFieldFontStyle.SFUITextRegular17,
          //       prefix: Container(
          //         margin: getMargin(
          //           left: 16,
          //           top: 12,
          //           right: 8,
          //           bottom: 12,
          //         ),
          //         child: CustomImageView(
          //           svgPath: ImageConstant.imgContrast,
          //         ),
          //       ),
          //     ),
          //   ),
          // ),
          // Positioned(
          //   bottom: 50,
          //   right: 20,
          //   child: SpeedDial(
          //     //Speed dial men//margin bottom
          //     icon: Icons.arrow_upward_outlined,
          //     //icon on Floating action button//shape of button
          //     children: [
          //       SpeedDialChild(
          //         //speed dial child
          //         child: Image.asset(
          //           mapTypeValue == MapType.terrain
          //               ? ImageConstant.layers
          //               : ImageConstant.layers,
          //           height: 20,
          //           width: 20,
          //         ),
          //         onTap: () {
          //           setState(() {
          //             if (this.mapTypeValue == MapType.terrain) {
          //               this.mapTypeValue = MapType.satellite;
          //             } else {
          //               this.mapTypeValue = MapType.terrain;
          //             }
          //           });
          //         },
          //       ),
          //       SpeedDialChild(
          //         child: Icon(Icons.search_outlined),
          //         onTap: () {
          //           Get.toNamed(AppRoutes.searchOneScreen);
          //         },
          //       ),
          //       SpeedDialChild(
          //         child: Icon(Icons.keyboard_voice),
          //         onTap: () => print('THIRD CHILD'),
          //         onLongPress: () => print('THIRD CHILD LONG PRESS'),
          //       ),

          //       //add more menu item childs here
          //     ],
          //   ),
          // )
        ]));
  }
}
